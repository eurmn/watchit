import{D as Ae,W as Be,S as ie,i as ue,s as fe,e as g,c as b,a as m,d as h,b as d,g as x,k as D,t as E,m as M,h as $,L as he,J as u,M as te,j as B,N as Pe,K as O,O as ze,P as We,Q,R as X,T as Te,U as Ie,v as De,V as Oe,l as de,X as Me,Y as Ye,o as F,p as je,q as Z,n as xe,w as ve,x as ge,y as be,B as we}from"../chunks/vendor-8e88fc51.js";import{a as Le}from"../chunks/paths-c0fc83a9.js";const ke=Ae(new Be),le=Ae();function He(o,e,l){const t=o.slice();return t[7]=e[l],t[9]=l,t}function qe(o){let e,l=o[1],t=[];for(let s=0;s<l.length;s+=1)t[s]=Re(He(o,l,s));return{c(){e=g("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var r=m(e);for(let a=0;a<t.length;a+=1)t[a].l(r);r.forEach(h),this.h()},h(){d(e,"class","py-2 bg-white w-full rounded-b-md sm:w-1/2 overflow-y-scroll text-slate-900")},m(s,r){x(s,e,r);for(let a=0;a<t.length;a+=1)t[a].m(e,null)},p(s,r){if(r&10){l=s[1];let a;for(a=0;a<l.length;a+=1){const c=He(s,l,a);t[a]?t[a].p(c,r):(t[a]=Re(c),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(s){s&&h(e),Pe(t,s)}}}function Re(o){let e,l,t,s,r,a,c,i=o[7].title+"",n,f,_,H,y,w,N,k=o[7].year+"",p,S,v,P,A=o[7].rating+"",R,W,Y,se,V,ee;return{c(){e=g("div"),l=g("img"),r=D(),a=g("span"),c=g("span"),n=E(i),f=D(),_=g("br"),H=D(),y=g("span"),w=g("span"),N=E("Year: "),p=E(k),S=D(),v=g("span"),P=E("Rating: "),R=E(A),W=E("/10"),Y=D(),this.h()},l(I){e=b(I,"DIV",{class:!0,"data-index":!0});var T=m(e);l=b(T,"IMG",{class:!0,src:!0,alt:!0}),r=M(T),a=b(T,"SPAN",{class:!0});var L=m(a);c=b(L,"SPAN",{class:!0});var U=m(c);n=$(U,i),f=M(U),_=b(U,"BR",{}),U.forEach(h),H=M(L),y=b(L,"SPAN",{class:!0});var G=m(y);w=b(G,"SPAN",{class:!0});var z=m(w);N=$(z,"Year: "),p=$(z,k),z.forEach(h),S=M(G),v=b(G,"SPAN",{class:!0});var J=m(v);P=$(J,"Rating: "),R=$(J,A),W=$(J,"/10"),J.forEach(h),G.forEach(h),L.forEach(h),Y=M(T),T.forEach(h),this.h()},h(){d(l,"class","h-24 mr-2 aspect-square object-cover rounded"),he(l.src,t=o[7].cover)||d(l,"src",t),d(l,"alt",s=""+(o[7].title+" Cover")),d(c,"class","font-extrabold text-lg"),d(w,"class","text-sm"),d(v,"class","text-sm"),d(y,"class","flex flex-col justify-self-end mt-1"),d(a,"class","flex flex-col h-full"),d(e,"class","flex align-center w-full p-2 h-25 bg-white hover:bg-gray-100 cursor-pointer"),d(e,"data-index",se=o[9])},m(I,T){x(I,e,T),u(e,l),u(e,r),u(e,a),u(a,c),u(c,n),u(c,f),u(c,_),u(a,H),u(a,y),u(y,w),u(w,N),u(w,p),u(y,S),u(y,v),u(v,P),u(v,R),u(v,W),u(e,Y),V||(ee=te(e,"click",o[3]),V=!0)},p(I,T){T&2&&!he(l.src,t=I[7].cover)&&d(l,"src",t),T&2&&s!==(s=""+(I[7].title+" Cover"))&&d(l,"alt",s),T&2&&i!==(i=I[7].title+"")&&B(n,i),T&2&&k!==(k=I[7].year+"")&&B(p,k),T&2&&A!==(A=I[7].rating+"")&&B(R,A)},d(I){I&&h(e),V=!1,ee()}}}function Ue(o){let e,l,t,s,r,a,c=o[1].length>0&&o[0]&&qe(o);return{c(){e=g("div"),l=g("input"),t=D(),c&&c.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var n=m(e);l=b(n,"INPUT",{autocomplete:!0,type:!0,class:!0}),t=M(n),c&&c.l(n),n.forEach(h),this.h()},h(){d(l,"autocomplete","off"),d(l,"type","text"),d(l,"class","outline outline-1 outline-slate-300 focus:outline-sky-600 focus:outline-2 p-2 drop-shadow-sm h-10 w-full sm:w-1/2 rounded bg-gradient-to-tr from-slate-100 to-white"),d(e,"class",s="transition-transform duration-500 w-full flex flex-col items-center translate-y-1/3 ease-out "+(o[1].length>0?"translate-y-0":"translate-y-1/3"))},m(i,n){x(i,e,n),u(e,l),u(e,t),c&&c.m(e,null),r||(a=[te(l,"input",o[2]),te(e,"focusin",o[4]),te(e,"blur",o[5])],r=!0)},p(i,[n]){i[1].length>0&&i[0]?c?c.p(i,n):(c=qe(i),c.c(),c.m(e,null)):c&&(c.d(1),c=null),n&2&&s!==(s="transition-transform duration-500 w-full flex flex-col items-center translate-y-1/3 ease-out "+(i[1].length>0?"translate-y-0":"translate-y-1/3"))&&d(e,"class",s)},i:O,o:O,d(i){i&&h(e),c&&c.d(),r=!1,ze(a)}}}function Ge(o,e,l){let t,s=!1,r=new Array;function a(f){let _=encodeURI(f.currentTarget.value);if(_===""){l(1,r=[]);return}t&&clearTimeout(t),t=setTimeout(()=>{We.get("https://yts.mx/api/v2/list_movies.json?query_term="+_+"&sort_by=seeds").then(H=>{let y=H.data.data.movies;l(1,r=y.map(w=>{let k=w.torrents.sort(({seedsA:p},{seedsB:S})=>S-p).map(({hash:p})=>p);return{title:w.title,cover:w.medium_cover_image,rating:w.rating,year:w.year,imdb:w.imdb_code,allHashes:k}}).sort((w,N)=>N.rating-w.rating))}).catch(console.log)},1e3)}function c(f){let _=r[f.currentTarget.dataset.index];le.set(_)}return[s,r,a,c,()=>l(0,s=!0),()=>l(0,s=!1)]}class Je extends ie{constructor(e){super();ue(this,e,Ge,Ue,fe,{})}}function Ke(o){let e,l,t,s;return{c(){e=g("span"),l=D(),t=g("span"),s=g("span"),this.h()},l(r){e=b(r,"SPAN",{class:!0}),m(e).forEach(h),l=M(r),t=b(r,"SPAN",{class:!0});var a=m(t);s=b(a,"SPAN",{class:!0}),m(s).forEach(h),a.forEach(h),this.h()},h(){d(e,"class","absolute left-0 bottom-0 w-full h-1 bg-slate-200 rounded-b overflow-hidden"),d(s,"class","absolute left-0 bottom-0 h-1 w-full bg-gradient-to-tr from-green-400 to-green-600"),d(t,"class","absolute left-0 bottom-0 h-1 overflow-hidden")},m(r,a){x(r,e,a),x(r,l,a),x(r,t,a),u(t,s),o[4](t)},p:O,d(r){r&&h(e),r&&h(l),r&&h(t),o[4](null)}}}function Qe(o){let e;return{c(){e=g("span"),this.h()},l(l){e=b(l,"SPAN",{class:!0}),m(e).forEach(h),this.h()},h(){d(e,"class","bg-blue-500 left-0 bottom-0 absolute w-full h-1 animate-pulse")},m(l,t){x(l,e,t)},p:O,d(l){l&&h(e)}}}function Xe(o){let e,l,t,s,r,a,c,i,n,f,_,H,y,w,N=o[0].title+"",k,p,S,v,P,A,R,W=o[0].year+"",Y,se,V,ee,I=o[0].rating+"",T,L,U,G,z,J,_e,ye;function Ee(j,q){return j[1]?Qe:Ke}let ae=Ee(o),C=ae(o);return{c(){e=g("div"),l=g("div"),t=g("span"),s=Q("svg"),r=Q("symbol"),a=Q("path"),c=Q("use"),i=D(),n=g("img"),H=D(),y=g("span"),w=g("span"),k=E(N),p=D(),S=g("br"),v=D(),P=g("span"),A=g("span"),R=E("Year: "),Y=E(W),se=D(),V=g("span"),ee=E("Rating: "),T=E(I),L=E("/10"),U=D(),C.c(),G=D(),z=g("div"),J=E("changing tabs might slow down the download speed"),this.h()},l(j){e=b(j,"DIV",{class:!0});var q=m(e);l=b(q,"DIV",{class:!0});var K=m(l);t=b(K,"SPAN",{class:!0});var $e=m(t);s=X($e,"svg",{class:!0});var me=m(s);r=X(me,"symbol",{id:!0,viewBox:!0});var Se=m(r);a=X(Se,"path",{d:!0}),m(a).forEach(h),Se.forEach(h),c=X(me,"use",{"xlink:href":!0}),m(c).forEach(h),me.forEach(h),$e.forEach(h),i=M(K),n=b(K,"IMG",{class:!0,src:!0,alt:!0}),H=M(K),y=b(K,"SPAN",{class:!0});var re=m(y);w=b(re,"SPAN",{class:!0});var ne=m(w);k=$(ne,N),p=M(ne),S=b(ne,"BR",{}),ne.forEach(h),v=M(re),P=b(re,"SPAN",{class:!0});var oe=m(P);A=b(oe,"SPAN",{class:!0});var pe=m(A);R=$(pe,"Year: "),Y=$(pe,W),pe.forEach(h),se=M(oe),V=b(oe,"SPAN",{class:!0});var ce=m(V);ee=$(ce,"Rating: "),T=$(ce,I),L=$(ce,"/10"),ce.forEach(h),oe.forEach(h),re.forEach(h),U=M(K),C.l(K),K.forEach(h),G=M(q),z=b(q,"DIV",{class:!0});var Ne=m(z);J=$(Ne,"changing tabs might slow down the download speed"),Ne.forEach(h),q.forEach(h),this.h()},h(){d(a,"d","M20.281 20.656c0 0.391-0.156 0.781-0.438 1.062l-2.125 2.125c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-4.594-4.594-4.594 4.594c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-2.125-2.125c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l4.594-4.594-4.594-4.594c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l2.125-2.125c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l4.594 4.594 4.594-4.594c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l2.125 2.125c0.281 0.281 0.438 0.672 0.438 1.062s-0.156 0.781-0.438 1.062l-4.594 4.594 4.594 4.594c0.281 0.281 0.438 0.672 0.438 1.062z"),d(r,"id","icon-close"),d(r,"viewBox","0 0 22 28"),Te(c,"xlink:href","#icon-close"),d(s,"class","icon icon-close svelte-2qiq74"),d(t,"class","absolute top-0 right-2 text-slate-400 cursor-pointer"),d(n,"class","h-24 mr-2 aspect-square object-cover rounded"),he(n.src,f=o[0].cover)||d(n,"src",f),d(n,"alt",_=""+(o[0].title+" Cover")),d(w,"class","font-extrabold text-lg"),d(A,"class","text-sm"),d(V,"class","text-sm"),d(P,"class","flex flex-col justify-self-end mt-1"),d(y,"class","flex flex-col h-full"),d(l,"class","bg-gradient-to-tr from-slate-100 to-white flex align-center p-2 w-full outline outline-1 outline-slate-300 drop-shadow-sm relative pb-3 rounded"),d(z,"class","pt-1 w-full text-center text-slate-400 text-sm"),d(e,"class","self-center w-full sm:w-1/2")},m(j,q){x(j,e,q),u(e,l),u(l,t),u(t,s),u(s,r),u(r,a),u(s,c),u(l,i),u(l,n),u(l,H),u(l,y),u(y,w),u(w,k),u(w,p),u(w,S),u(y,v),u(y,P),u(P,A),u(A,R),u(A,Y),u(P,se),u(P,V),u(V,ee),u(V,T),u(V,L),u(l,U),C.m(l,null),u(e,G),u(e,z),u(z,J),_e||(ye=te(t,"click",o[3]),_e=!0)},p(j,[q]){q&1&&!he(n.src,f=j[0].cover)&&d(n,"src",f),q&1&&_!==(_=""+(j[0].title+" Cover"))&&d(n,"alt",_),q&1&&N!==(N=j[0].title+"")&&B(k,N),q&1&&W!==(W=j[0].year+"")&&B(Y,W),q&1&&I!==(I=j[0].rating+"")&&B(T,I),ae===(ae=Ee(j))&&C?C.p(j,q):(C.d(1),C=ae(j),C&&(C.c(),C.m(l,null)))},i:O,o:O,d(j){j&&h(e),C.d(),_e=!1,ye()}}}function Fe(o,e,l){let t,s;le.subscribe(f=>l(0,s=f)),ke.subscribe(f=>t=f);let r=!0,a,c;Ie.mitm=Le+"/mitm.html";function i(){le.set(null),c&&c()}De(()=>{let f=t.add(s.selectedHash,{announce:["wss://tracker.openwebtorrent.com","wss://tracker.btorrent.xyz"]});f.once("metadata",()=>{f.files.forEach(_=>{if(_.name.endsWith(".mp4")||_.name.endsWith(".mkv")){let y=Ie.createWriteStream(_.name,{size:_.length}).getWriter();c=window.onunload=()=>{y.abort(),f.removeAllListeners(),f.destroy()},_.createReadStream().on("data",w=>{y.write(w)}).on("end",()=>y.close());return}_.deselect()}),l(1,r=!1),f.on("download",()=>{if(a){let _=Math.round(f.progress*1e4)/100;l(2,a.style.width=`${_}%`,a)}})})});function n(f){Oe[f?"unshift":"push"](()=>{a=f,l(2,a)})}return[s,r,a,i,n]}class Ze extends ie{constructor(e){super();ue(this,e,Fe,Xe,fe,{})}}function Ve(o,e,l){const t=o.slice();return t[5]=e[l],t}function et(o){let e,l,t,s,r,a,c;return{c(){e=g("div"),l=Q("svg"),t=Q("symbol"),s=Q("path"),r=Q("use"),a=D(),c=E(o[2]),this.h()},l(i){e=b(i,"DIV",{class:!0});var n=m(e);l=X(n,"svg",{class:!0});var f=m(l);t=X(f,"symbol",{id:!0,viewBox:!0});var _=m(t);s=X(_,"path",{d:!0}),m(s).forEach(h),_.forEach(h),r=X(f,"use",{"xlink:href":!0}),m(r).forEach(h),f.forEach(h),a=M(n),c=$(n,o[2]),n.forEach(h),this.h()},h(){d(s,"d","M16 0c-8.711 0-15.796 6.961-15.995 15.624 0.185-7.558 5.932-13.624 12.995-13.624 7.18 0 13 6.268 13 14 0 1.657 1.343 3 3 3s3-1.343 3-3c0-8.837-7.163-16-16-16zM16 32c8.711 0 15.796-6.961 15.995-15.624-0.185 7.558-5.932 13.624-12.995 13.624-7.18 0-13-6.268-13-14 0-1.657-1.343-3-3-3s-3 1.343-3 3c0 8.837 7.163 16 16 16z"),d(t,"id","icon-spinner9"),d(t,"viewBox","0 0 32 32"),Te(r,"xlink:href","#icon-spinner9"),d(l,"class","animate-spin icon icon-spinner9 svelte-mhwjkv"),d(e,"class","justify-self-center self-center text-slate-600")},m(i,n){x(i,e,n),u(e,l),u(l,t),u(t,s),u(l,r),u(e,a),u(e,c)},p(i,n){n&4&&B(c,i[2])},d(i){i&&h(e)}}}function tt(o){let e,l,t,s,r,a,c=o[0].allHashes.length-o[1].length+"",i,n,f=(o[0].allHashes.length-o[1].length==1?"":"s")+"",_,H,y,w,N=o[1],k=[];for(let p=0;p<N.length;p+=1)k[p]=Ce(Ve(o,N,p));return{c(){e=g("div"),l=g("select"),t=g("option"),s=E("Select an option");for(let p=0;p<k.length;p+=1)k[p].c();r=D(),a=g("div"),i=E(c),n=E(" more option"),_=E(f),H=E(" awaiting validation"),this.h()},l(p){e=b(p,"DIV",{class:!0});var S=m(e);l=b(S,"SELECT",{class:!0});var v=m(l);t=b(v,"OPTION",{});var P=m(t);s=$(P,"Select an option"),P.forEach(h);for(let R=0;R<k.length;R+=1)k[R].l(v);v.forEach(h),r=M(S),a=b(S,"DIV",{class:!0});var A=m(a);i=$(A,c),n=$(A," more option"),_=$(A,f),H=$(A," awaiting validation"),A.forEach(h),S.forEach(h),this.h()},h(){t.__value="",t.value=t.__value,d(l,"class","h-full w-full p-1 rounded outline outline-1 outline-slate-300 bg-gradient-to-tr from-slate-100 to-white text-center"),d(a,"class","w-full text-center text-slate-600 text-sm"),d(e,"class","h-10 w-full sm:w-1/2 justify-self-center self-center ")},m(p,S){x(p,e,S),u(e,l),u(l,t),u(t,s);for(let v=0;v<k.length;v+=1)k[v].m(l,null);u(e,r),u(e,a),u(a,i),u(a,n),u(a,_),u(a,H),y||(w=te(l,"change",o[3]),y=!0)},p(p,S){if(S&2){N=p[1];let v;for(v=0;v<N.length;v+=1){const P=Ve(p,N,v);k[v]?k[v].p(P,S):(k[v]=Ce(P),k[v].c(),k[v].m(l,null))}for(;v<k.length;v+=1)k[v].d(1);k.length=N.length}S&3&&c!==(c=p[0].allHashes.length-p[1].length+"")&&B(i,c),S&3&&f!==(f=(p[0].allHashes.length-p[1].length==1?"":"s")+"")&&B(_,f)},d(p){p&&h(e),Pe(k,p),y=!1,w()}}}function Ce(o){let e,l=o[5].name+"",t,s,r=Me(o[5].length)+"",a,c,i;return{c(){e=g("option"),t=E(l),s=E(" ("),a=E(r),c=E(")"),this.h()},l(n){e=b(n,"OPTION",{});var f=m(e);t=$(f,l),s=$(f," ("),a=$(f,r),c=$(f,")"),f.forEach(h),this.h()},h(){e.__value=i=o[5].infoHash,e.value=e.__value},m(n,f){x(n,e,f),u(e,t),u(e,s),u(e,a),u(e,c)},p(n,f){f&2&&l!==(l=n[5].name+"")&&B(t,l),f&2&&r!==(r=Me(n[5].length)+"")&&B(a,r),f&2&&i!==(i=n[5].infoHash)&&(e.__value=i,e.value=e.__value)},d(n){n&&h(e)}}}function lt(o){let e;function l(r,a){return r[1].length>=1?tt:et}let t=l(o),s=t(o);return{c(){s.c(),e=de()},l(r){s.l(r),e=de()},m(r,a){s.m(r,a),x(r,e,a)},p(r,[a]){t===(t=l(r))&&s?s.p(r,a):(s.d(1),s=t(r),s&&(s.c(),s.m(e.parentNode,e)))},i:O,o:O,d(r){s.d(r),r&&h(e)}}}function st(o,e,l){let t,s;le.subscribe(i=>l(0,s=i)),ke.subscribe(i=>t=i);let r=new Array,a="";function c(i){l(0,s.selectedHash=i.currentTarget.value,s),le.set(s)}return De(async()=>{s.allHashes.forEach(i=>{let n=t.add(i,{announce:["wss://tracker.openwebtorrent.com","wss://tracker.btorrent.xyz"]});n.once("metadata",()=>{l(1,r=[...r,n]),n.removeAllListeners(),n.destroy()}),ke.set(t)}),setTimeout(()=>l(2,a="This is taking too long, the selected movie most likely has no active webseeders."),60*2*1e3)}),[s,r,a,c]}class at extends ie{constructor(e){super();ue(this,e,st,lt,fe,{})}}function rt(o){let e,l;return e=new Je({}),{c(){ve(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),l=!0},p:O,i(t){l||(Z(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){we(e,t)}}}function nt(o){let e,l,t,s;const r=[ct,ot],a=[];function c(i,n){return i[0].selectedHash?0:1}return e=c(o),l=a[e]=r[e](o),{c(){l.c(),t=de()},l(i){l.l(i),t=de()},m(i,n){a[e].m(i,n),x(i,t,n),s=!0},p(i,n){let f=e;e=c(i),e!==f&&(xe(),F(a[f],1,1,()=>{a[f]=null}),je(),l=a[e],l||(l=a[e]=r[e](i),l.c()),Z(l,1),l.m(t.parentNode,t))},i(i){s||(Z(l),s=!0)},o(i){F(l),s=!1},d(i){a[e].d(i),i&&h(t)}}}function ot(o){let e,l;return e=new at({}),{c(){ve(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),l=!0},i(t){l||(Z(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){we(e,t)}}}function ct(o){let e,l;return e=new Ze({}),{c(){ve(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),l=!0},i(t){l||(Z(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){we(e,t)}}}function it(o){let e,l,t,s,r;const a=[nt,rt],c=[];function i(n,f){return n[0]?0:1}return t=i(o),s=c[t]=a[t](o),{c(){e=D(),l=g("main"),s.c(),this.h()},l(n){Ye('[data-svelte="svelte-1bc0lsu"]',document.head).forEach(h),e=M(n),l=b(n,"MAIN",{class:!0});var _=m(l);s.l(_),_.forEach(h),this.h()},h(){document.title="watchit",d(l,"class","p-5 w-full h-full bg-slate-200 text-slate-900 flex justify-center")},m(n,f){x(n,e,f),x(n,l,f),c[t].m(l,null),r=!0},p(n,[f]){let _=t;t=i(n),t===_?c[t].p(n,f):(xe(),F(c[_],1,1,()=>{c[_]=null}),je(),s=c[t],s?s.p(n,f):(s=c[t]=a[t](n),s.c()),Z(s,1),s.m(l,null))},i(n){r||(Z(s),r=!0)},o(n){F(s),r=!1},d(n){n&&h(e),n&&h(l),c[t].d()}}}function ut(o,e,l){let t;return le.subscribe(s=>l(0,t=s)),[t]}class dt extends ie{constructor(e){super();ue(this,e,ut,it,fe,{})}}export{dt as default};
