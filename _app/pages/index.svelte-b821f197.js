import{D as ke,W as De,S as oe,i as ce,s as ie,e as g,c as b,a as v,d as h,b as _,g as R,k as j,t as E,m as D,h as $,L as ue,J as u,M as te,j as B,N as ye,K as W,O as qe,P as Re,Q as G,R as J,T as Ee,U as $e,v as Se,V as Ce,l as fe,X as Ne,Y as xe,o as F,p as Ae,q as Z,n as Pe,w as me,x as pe,y as ve,B as ge}from"../chunks/vendor-8e88fc51.js";import{a as Be}from"../chunks/paths-c0fc83a9.js";const he=ke(new De),le=ke();function Te(c,e,l){const t=c.slice();return t[7]=e[l],t[9]=l,t}function Ie(c){let e,l=c[1],t=[];for(let s=0;s<l.length;s+=1)t[s]=He(Te(c,l,s));return{c(){e=g("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var a=v(e);for(let r=0;r<t.length;r+=1)t[r].l(a);a.forEach(h),this.h()},h(){_(e,"class","py-2 bg-white w-full rounded-b-md sm:w-1/2 overflow-y-scroll text-slate-900")},m(s,a){R(s,e,a);for(let r=0;r<t.length;r+=1)t[r].m(e,null)},p(s,a){if(a&10){l=s[1];let r;for(r=0;r<l.length;r+=1){const i=Te(s,l,r);t[r]?t[r].p(i,a):(t[r]=He(i),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){s&&h(e),ye(t,s)}}}function He(c){let e,l,t,s,a,r,i,o=c[7].title+"",n,f,m,N,k,y,A,w=c[7].year+"",p,S,d,T,q=c[7].rating+"",C,O,K,V,Q,Y;return{c(){e=g("div"),l=g("img"),a=j(),r=g("span"),i=g("span"),n=E(o),f=j(),m=g("br"),N=j(),k=g("span"),y=g("span"),A=E("Year: "),p=E(w),S=j(),d=g("span"),T=E("Rating: "),C=E(q),O=E("/10"),K=j(),this.h()},l(H){e=b(H,"DIV",{class:!0,"data-index":!0});var I=v(e);l=b(I,"IMG",{class:!0,src:!0,alt:!0}),a=D(I),r=b(I,"SPAN",{class:!0});var L=v(r);i=b(L,"SPAN",{class:!0});var U=v(i);n=$(U,o),f=D(U),m=b(U,"BR",{}),U.forEach(h),N=D(L),k=b(L,"SPAN",{class:!0});var X=v(k);y=b(X,"SPAN",{class:!0});var ee=v(y);A=$(ee,"Year: "),p=$(ee,w),ee.forEach(h),S=D(X),d=b(X,"SPAN",{class:!0});var z=v(d);T=$(z,"Rating: "),C=$(z,q),O=$(z,"/10"),z.forEach(h),X.forEach(h),L.forEach(h),K=D(I),I.forEach(h),this.h()},h(){_(l,"class","h-24 mr-2 aspect-square object-cover rounded"),ue(l.src,t=c[7].cover)||_(l,"src",t),_(l,"alt",s=""+(c[7].title+" Cover")),_(i,"class","font-extrabold text-lg"),_(y,"class","text-sm"),_(d,"class","text-sm"),_(k,"class","flex flex-col justify-self-end mt-1"),_(r,"class","flex flex-col h-full"),_(e,"class","flex align-center w-full p-2 h-25 bg-white hover:bg-gray-100 cursor-pointer"),_(e,"data-index",V=c[9])},m(H,I){R(H,e,I),u(e,l),u(e,a),u(e,r),u(r,i),u(i,n),u(i,f),u(i,m),u(r,N),u(r,k),u(k,y),u(y,A),u(y,p),u(k,S),u(k,d),u(d,T),u(d,C),u(d,O),u(e,K),Q||(Y=te(e,"click",c[3]),Q=!0)},p(H,I){I&2&&!ue(l.src,t=H[7].cover)&&_(l,"src",t),I&2&&s!==(s=""+(H[7].title+" Cover"))&&_(l,"alt",s),I&2&&o!==(o=H[7].title+"")&&B(n,o),I&2&&w!==(w=H[7].year+"")&&B(p,w),I&2&&q!==(q=H[7].rating+"")&&B(C,q)},d(H){H&&h(e),Q=!1,Y()}}}function Ve(c){let e,l,t,s,a,r,i=c[1].length>0&&c[0]&&Ie(c);return{c(){e=g("div"),l=g("input"),t=j(),i&&i.c(),this.h()},l(o){e=b(o,"DIV",{class:!0});var n=v(e);l=b(n,"INPUT",{autocomplete:!0,type:!0,class:!0}),t=D(n),i&&i.l(n),n.forEach(h),this.h()},h(){_(l,"autocomplete","off"),_(l,"type","text"),_(l,"class","outline outline-1 outline-slate-300 focus:outline-sky-600 focus:outline-2 p-2 drop-shadow-sm h-10 w-full sm:w-1/2 rounded bg-gradient-to-tr from-slate-100 to-white"),_(e,"class",s="transition-transform duration-500 w-full flex flex-col items-center translate-y-1/3 ease-out "+(c[1].length>0?"translate-y-0":"translate-y-1/3"))},m(o,n){R(o,e,n),u(e,l),u(e,t),i&&i.m(e,null),a||(r=[te(l,"input",c[2]),te(e,"focusin",c[4]),te(e,"blur",c[5])],a=!0)},p(o,[n]){o[1].length>0&&o[0]?i?i.p(o,n):(i=Ie(o),i.c(),i.m(e,null)):i&&(i.d(1),i=null),n&2&&s!==(s="transition-transform duration-500 w-full flex flex-col items-center translate-y-1/3 ease-out "+(o[1].length>0?"translate-y-0":"translate-y-1/3"))&&_(e,"class",s)},i:W,o:W,d(o){o&&h(e),i&&i.d(),a=!1,qe(r)}}}function ze(c,e,l){let t,s=!1,a=new Array;function r(f){let m=encodeURI(f.currentTarget.value);if(m===""){l(1,a=[]);return}t&&clearTimeout(t),t=setTimeout(()=>{Re.get("https://yts.mx/api/v2/list_movies.json?query_term="+m+"&sort_by=seeds").then(N=>{let k=N.data.data.movies;l(1,a=k.map(y=>{let w=y.torrents.sort(({seedsA:p},{seedsB:S})=>S-p).map(({hash:p})=>p);return{title:y.title,cover:y.medium_cover_image,rating:y.rating,year:y.year,imdb:y.imdb_code,allHashes:w}}).sort((y,A)=>A.rating-y.rating))}).catch(console.log)},1e3)}function i(f){let m=a[f.currentTarget.dataset.index];le.set(m)}return[s,a,r,i,()=>l(0,s=!0),()=>l(0,s=!1)]}class We extends oe{constructor(e){super();ce(this,e,ze,Ve,ie,{})}}function Oe(c){let e,l,t,s;return{c(){e=g("span"),l=j(),t=g("span"),s=g("span"),this.h()},l(a){e=b(a,"SPAN",{class:!0}),v(e).forEach(h),l=D(a),t=b(a,"SPAN",{class:!0});var r=v(t);s=b(r,"SPAN",{class:!0}),v(s).forEach(h),r.forEach(h),this.h()},h(){_(e,"class","absolute left-0 bottom-0 w-full h-1 bg-slate-200 rounded-b overflow-hidden"),_(s,"class","absolute left-0 bottom-0 h-1 w-full bg-gradient-to-tr from-green-400 to-green-600"),_(t,"class","absolute left-0 bottom-0 h-1 overflow-hidden")},m(a,r){R(a,e,r),R(a,l,r),R(a,t,r),u(t,s),c[4](t)},p:W,d(a){a&&h(e),a&&h(l),a&&h(t),c[4](null)}}}function Ye(c){let e;return{c(){e=g("span"),this.h()},l(l){e=b(l,"SPAN",{class:!0}),v(e).forEach(h),this.h()},h(){_(e,"class","bg-blue-500 left-0 bottom-0 absolute w-full h-1 animate-pulse")},m(l,t){R(l,e,t)},p:W,d(l){l&&h(e)}}}function Le(c){let e,l,t,s,a,r,i,o,n,f,m,N,k,y=c[0].title+"",A,w,p,S,d,T,q,C=c[0].year+"",O,K,V,Q,Y=c[0].rating+"",H,I,L,U,X;function ee(M,P){return M[1]?Ye:Oe}let z=ee(c),x=z(c);return{c(){e=g("div"),l=g("span"),t=G("svg"),s=G("symbol"),a=G("path"),r=G("use"),i=j(),o=g("img"),m=j(),N=g("span"),k=g("span"),A=E(y),w=j(),p=g("br"),S=j(),d=g("span"),T=g("span"),q=E("Year: "),O=E(C),K=j(),V=g("span"),Q=E("Rating: "),H=E(Y),I=E("/10"),L=j(),x.c(),this.h()},l(M){e=b(M,"DIV",{class:!0});var P=v(e);l=b(P,"SPAN",{class:!0});var be=v(l);t=J(be,"svg",{class:!0});var _e=v(t);s=J(_e,"symbol",{id:!0,viewBox:!0});var we=v(s);a=J(we,"path",{d:!0}),v(a).forEach(h),we.forEach(h),r=J(_e,"use",{"xlink:href":!0}),v(r).forEach(h),_e.forEach(h),be.forEach(h),i=D(P),o=b(P,"IMG",{class:!0,src:!0,alt:!0}),m=D(P),N=b(P,"SPAN",{class:!0});var se=v(N);k=b(se,"SPAN",{class:!0});var re=v(k);A=$(re,y),w=D(re),p=b(re,"BR",{}),re.forEach(h),S=D(se),d=b(se,"SPAN",{class:!0});var ae=v(d);T=b(ae,"SPAN",{class:!0});var de=v(T);q=$(de,"Year: "),O=$(de,C),de.forEach(h),K=D(ae),V=b(ae,"SPAN",{class:!0});var ne=v(V);Q=$(ne,"Rating: "),H=$(ne,Y),I=$(ne,"/10"),ne.forEach(h),ae.forEach(h),se.forEach(h),L=D(P),x.l(P),P.forEach(h),this.h()},h(){_(a,"d","M20.281 20.656c0 0.391-0.156 0.781-0.438 1.062l-2.125 2.125c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-4.594-4.594-4.594 4.594c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-2.125-2.125c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l4.594-4.594-4.594-4.594c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l2.125-2.125c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l4.594 4.594 4.594-4.594c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l2.125 2.125c0.281 0.281 0.438 0.672 0.438 1.062s-0.156 0.781-0.438 1.062l-4.594 4.594 4.594 4.594c0.281 0.281 0.438 0.672 0.438 1.062z"),_(s,"id","icon-close"),_(s,"viewBox","0 0 22 28"),Ee(r,"xlink:href","#icon-close"),_(t,"class","icon icon-close svelte-2qiq74"),_(l,"class","absolute top-0 right-2 text-slate-400 cursor-pointer"),_(o,"class","h-24 mr-2 aspect-square object-cover rounded"),ue(o.src,n=c[0].cover)||_(o,"src",n),_(o,"alt",f=""+(c[0].title+" Cover")),_(k,"class","font-extrabold text-lg"),_(T,"class","text-sm"),_(V,"class","text-sm"),_(d,"class","flex flex-col justify-self-end mt-1"),_(N,"class","flex flex-col h-full"),_(e,"class","bg-gradient-to-tr from-slate-100 to-white flex align-center self-center p-2 w-full sm:w-1/2 outline outline-1 outline-slate-300 drop-shadow-sm relative pb-3 rounded")},m(M,P){R(M,e,P),u(e,l),u(l,t),u(t,s),u(s,a),u(t,r),u(e,i),u(e,o),u(e,m),u(e,N),u(N,k),u(k,A),u(k,w),u(k,p),u(N,S),u(N,d),u(d,T),u(T,q),u(T,O),u(d,K),u(d,V),u(V,Q),u(V,H),u(V,I),u(e,L),x.m(e,null),U||(X=te(l,"click",c[3]),U=!0)},p(M,[P]){P&1&&!ue(o.src,n=M[0].cover)&&_(o,"src",n),P&1&&f!==(f=""+(M[0].title+" Cover"))&&_(o,"alt",f),P&1&&y!==(y=M[0].title+"")&&B(A,y),P&1&&C!==(C=M[0].year+"")&&B(O,C),P&1&&Y!==(Y=M[0].rating+"")&&B(H,Y),z===(z=ee(M))&&x?x.p(M,P):(x.d(1),x=z(M),x&&(x.c(),x.m(e,null)))},i:W,o:W,d(M){M&&h(e),x.d(),U=!1,X()}}}function Ue(c,e,l){let t,s;le.subscribe(f=>l(0,s=f)),he.subscribe(f=>t=f);let a=!0,r,i;$e.mitm=Be+"/mitm.html";function o(){le.set(null),i&&i()}Se(()=>{let f=t.torrents[0];f.files.forEach(m=>{if(m.name.endsWith(".mp4")||m.name.endsWith(".mkv")){let k=$e.createWriteStream(m.name,{size:m.length}).getWriter();i=window.onunload=()=>{k.abort(),f.removeAllListeners(),f.destroy()},m.createReadStream().on("data",y=>{k.write(y)}).on("end",()=>k.close());return}m.deselect()}),l(1,a=!1),f.on("download",()=>{if(r){let m=Math.round(f.progress*1e4)/100;l(2,r.style.width=`${m}%`,r)}})});function n(f){Ce[f?"unshift":"push"](()=>{r=f,l(2,r)})}return[s,a,r,o,n]}class Ge extends oe{constructor(e){super();ce(this,e,Ue,Le,ie,{})}}function Me(c,e,l){const t=c.slice();return t[5]=e[l],t[7]=l,t}function Je(c){let e,l,t,s,a,r,i;return{c(){e=g("div"),l=G("svg"),t=G("symbol"),s=G("path"),a=G("use"),r=j(),i=E(c[2]),this.h()},l(o){e=b(o,"DIV",{class:!0});var n=v(e);l=J(n,"svg",{class:!0});var f=v(l);t=J(f,"symbol",{id:!0,viewBox:!0});var m=v(t);s=J(m,"path",{d:!0}),v(s).forEach(h),m.forEach(h),a=J(f,"use",{"xlink:href":!0}),v(a).forEach(h),f.forEach(h),r=D(n),i=$(n,c[2]),n.forEach(h),this.h()},h(){_(s,"d","M16 0c-8.711 0-15.796 6.961-15.995 15.624 0.185-7.558 5.932-13.624 12.995-13.624 7.18 0 13 6.268 13 14 0 1.657 1.343 3 3 3s3-1.343 3-3c0-8.837-7.163-16-16-16zM16 32c8.711 0 15.796-6.961 15.995-15.624-0.185 7.558-5.932 13.624-12.995 13.624-7.18 0-13-6.268-13-14 0-1.657-1.343-3-3-3s-3 1.343-3 3c0 8.837 7.163 16 16 16z"),_(t,"id","icon-spinner9"),_(t,"viewBox","0 0 32 32"),Ee(a,"xlink:href","#icon-spinner9"),_(l,"class","animate-spin icon icon-spinner9 svelte-mhwjkv"),_(e,"class","justify-self-center self-center text-slate-600")},m(o,n){R(o,e,n),u(e,l),u(l,t),u(t,s),u(l,a),u(e,r),u(e,i)},p(o,n){n&4&&B(i,o[2])},d(o){o&&h(e)}}}function Ke(c){let e,l,t,s,a,r,i=c[0].allHashes.length-c[1].length+"",o,n,f=(c[0].allHashes.length-c[1].length==1?"":"s")+"",m,N,k,y,A=c[1],w=[];for(let p=0;p<A.length;p+=1)w[p]=je(Me(c,A,p));return{c(){e=g("div"),l=g("select"),t=g("option"),s=E("Select an option");for(let p=0;p<w.length;p+=1)w[p].c();a=j(),r=g("div"),o=E(i),n=E(" more option"),m=E(f),N=E(" awaiting validation"),this.h()},l(p){e=b(p,"DIV",{class:!0});var S=v(e);l=b(S,"SELECT",{class:!0});var d=v(l);t=b(d,"OPTION",{});var T=v(t);s=$(T,"Select an option"),T.forEach(h);for(let C=0;C<w.length;C+=1)w[C].l(d);d.forEach(h),a=D(S),r=b(S,"DIV",{class:!0});var q=v(r);o=$(q,i),n=$(q," more option"),m=$(q,f),N=$(q," awaiting validation"),q.forEach(h),S.forEach(h),this.h()},h(){t.__value="",t.value=t.__value,_(l,"class","h-full w-full p-1 rounded outline outline-1 outline-slate-300 bg-gradient-to-tr from-slate-100 to-white text-center"),_(r,"class","w-full text-center text-slate-600 text-sm"),_(e,"class","h-10 w-full sm:w-1/2 justify-self-center self-center ")},m(p,S){R(p,e,S),u(e,l),u(l,t),u(t,s);for(let d=0;d<w.length;d+=1)w[d].m(l,null);u(e,a),u(e,r),u(r,o),u(r,n),u(r,m),u(r,N),k||(y=te(l,"change",c[3]),k=!0)},p(p,S){if(S&2){A=p[1];let d;for(d=0;d<A.length;d+=1){const T=Me(p,A,d);w[d]?w[d].p(T,S):(w[d]=je(T),w[d].c(),w[d].m(l,null))}for(;d<w.length;d+=1)w[d].d(1);w.length=A.length}S&3&&i!==(i=p[0].allHashes.length-p[1].length+"")&&B(o,i),S&3&&f!==(f=(p[0].allHashes.length-p[1].length==1?"":"s")+"")&&B(m,f)},d(p){p&&h(e),ye(w,p),k=!1,y()}}}function je(c){let e,l=c[5].name+"",t,s,a=Ne(c[5].length)+"",r,i,o;return{c(){e=g("option"),t=E(l),s=E(" ("),r=E(a),i=E(")"),this.h()},l(n){e=b(n,"OPTION",{});var f=v(e);t=$(f,l),s=$(f," ("),r=$(f,a),i=$(f,")"),f.forEach(h),this.h()},h(){e.__value=o=c[5].infoHash,e.value=e.__value},m(n,f){R(n,e,f),u(e,t),u(e,s),u(e,r),u(e,i)},p(n,f){f&2&&l!==(l=n[5].name+"")&&B(t,l),f&2&&a!==(a=Ne(n[5].length)+"")&&B(r,a),f&2&&o!==(o=n[5].infoHash)&&(e.__value=o,e.value=e.__value)},d(n){n&&h(e)}}}function Qe(c){let e;function l(a,r){return a[1].length>=1?Ke:Je}let t=l(c),s=t(c);return{c(){s.c(),e=fe()},l(a){s.l(a),e=fe()},m(a,r){s.m(a,r),R(a,e,r)},p(a,[r]){t===(t=l(a))&&s?s.p(a,r):(s.d(1),s=t(a),s&&(s.c(),s.m(e.parentNode,e)))},i:W,o:W,d(a){s.d(a),a&&h(e)}}}function Xe(c,e,l){let t,s;le.subscribe(o=>l(0,s=o)),he.subscribe(o=>t=o);let a=new Array,r="";function i(o){l(0,s.selectedHash=o.currentTarget.value,s),t.torrents.filter(n=>n.infoHash!=s.selectedHash).forEach(n=>{n.removeAllListeners(),n.destroy()}),he.set(t),le.set(s)}return Se(async()=>{s.allHashes.forEach(o=>{let n=t.add(o,{announce:["wss://tracker.openwebtorrent.com","wss://tracker.btorrent.xyz"]});n.once("metadata",()=>{l(1,a=[...a,n]),n.pause()}),he.set(t)}),setTimeout(()=>l(2,r="This is taking too long, the selected movie most likely has no active webseeders."),60*2*1e3)}),[s,a,r,i]}class Fe extends oe{constructor(e){super();ce(this,e,Xe,Qe,ie,{})}}function Ze(c){let e,l;return e=new We({}),{c(){me(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ve(e,t,s),l=!0},p:W,i(t){l||(Z(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ge(e,t)}}}function et(c){let e,l,t,s;const a=[lt,tt],r=[];function i(o,n){return o[0].selectedHash?0:1}return e=i(c),l=r[e]=a[e](c),{c(){l.c(),t=fe()},l(o){l.l(o),t=fe()},m(o,n){r[e].m(o,n),R(o,t,n),s=!0},p(o,n){let f=e;e=i(o),e!==f&&(Pe(),F(r[f],1,1,()=>{r[f]=null}),Ae(),l=r[e],l||(l=r[e]=a[e](o),l.c()),Z(l,1),l.m(t.parentNode,t))},i(o){s||(Z(l),s=!0)},o(o){F(l),s=!1},d(o){r[e].d(o),o&&h(t)}}}function tt(c){let e,l;return e=new Fe({}),{c(){me(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ve(e,t,s),l=!0},i(t){l||(Z(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ge(e,t)}}}function lt(c){let e,l;return e=new Ge({}),{c(){me(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ve(e,t,s),l=!0},i(t){l||(Z(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ge(e,t)}}}function st(c){let e,l,t,s,a;const r=[et,Ze],i=[];function o(n,f){return n[0]?0:1}return t=o(c),s=i[t]=r[t](c),{c(){e=j(),l=g("main"),s.c(),this.h()},l(n){xe('[data-svelte="svelte-1bc0lsu"]',document.head).forEach(h),e=D(n),l=b(n,"MAIN",{class:!0});var m=v(l);s.l(m),m.forEach(h),this.h()},h(){document.title="watchit",_(l,"class","p-5 w-full h-full bg-slate-200 text-slate-900 flex justify-center")},m(n,f){R(n,e,f),R(n,l,f),i[t].m(l,null),a=!0},p(n,[f]){let m=t;t=o(n),t===m?i[t].p(n,f):(Pe(),F(i[m],1,1,()=>{i[m]=null}),Ae(),s=i[t],s?s.p(n,f):(s=i[t]=r[t](n),s.c()),Z(s,1),s.m(l,null))},i(n){a||(Z(s),a=!0)},o(n){F(s),a=!1},d(n){n&&h(e),n&&h(l),i[t].d()}}}function rt(c,e,l){let t;return le.subscribe(s=>l(0,t=s)),[t]}class ot extends oe{constructor(e){super();ce(this,e,rt,st,ie,{})}}export{ot as default};
