import{S as ie,i as ue,s as fe,e as _,c as p,a as m,d as h,b as f,g as x,k as N,t as C,m as A,h as q,L as le,J as i,M as F,j as X,N as ye,K as O,O as ke,P as Se,Q as se,R as ae,T as Ee,U as Me,v as Pe,W as Ne,V as Ae,X as Ce,Y as qe,o as re,p as Re,q as ne,n as Te,w as _e,x as pe,y as me,B as ve}from"../chunks/vendor-d3e7c3e6.js";function ge(r,e,l){const t=r.slice();return t[8]=e[l],t[10]=l,t}function be(r){let e,l=r[1],t=[];for(let s=0;s<l.length;s+=1)t[s]=we(ge(r,l,s));return{c(){e=_("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=p(s,"DIV",{class:!0});var n=m(e);for(let a=0;a<t.length;a+=1)t[a].l(n);n.forEach(h),this.h()},h(){f(e,"class","py-2 bg-white w-full rounded-b-md sm:w-1/2 overflow-y-scroll text-slate-900")},m(s,n){x(s,e,n);for(let a=0;a<t.length;a+=1)t[a].m(e,null)},p(s,n){if(n&10){l=s[1];let a;for(a=0;a<l.length;a+=1){const o=ge(s,l,a);t[a]?t[a].p(o,n):(t[a]=we(o),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(s){s&&h(e),ye(t,s)}}}function we(r){let e,l,t,s,n,a,o,u=r[8].title+"",c,d,v,b,g,M,S,P=r[8].year+"",j,L,y,R,W=r[8].rating+"",B,D,U,I,J,$;return{c(){e=_("div"),l=_("img"),n=N(),a=_("span"),o=_("span"),c=C(u),d=N(),v=_("br"),b=N(),g=_("span"),M=_("span"),S=C("Year: "),j=C(P),L=N(),y=_("span"),R=C("Rating: "),B=C(W),D=C("/10"),U=N(),this.h()},l(E){e=p(E,"DIV",{class:!0,"data-index":!0});var k=m(e);l=p(k,"IMG",{class:!0,src:!0,alt:!0}),n=A(k),a=p(k,"SPAN",{class:!0});var z=m(a);o=p(z,"SPAN",{class:!0});var G=m(o);c=q(G,u),d=A(G),v=p(G,"BR",{}),G.forEach(h),b=A(z),g=p(z,"SPAN",{class:!0});var K=m(g);M=p(K,"SPAN",{class:!0});var Q=m(M);S=q(Q,"Year: "),j=q(Q,P),Q.forEach(h),L=A(K),y=p(K,"SPAN",{class:!0});var V=m(y);R=q(V,"Rating: "),B=q(V,W),D=q(V,"/10"),V.forEach(h),K.forEach(h),z.forEach(h),U=A(k),k.forEach(h),this.h()},h(){f(l,"class","h-24 mr-2 aspect-square object-cover rounded"),le(l.src,t=r[8].cover)||f(l,"src",t),f(l,"alt",s=""+(r[8].title+" Cover")),f(o,"class","font-extrabold text-lg"),f(M,"class","text-sm"),f(y,"class","text-sm"),f(g,"class","flex flex-col justify-self-end mt-1"),f(a,"class","flex flex-col h-full"),f(e,"class","flex align-center w-full p-2 h-25 bg-white hover:bg-gray-100 cursor-pointer"),f(e,"data-index",I=r[10])},m(E,k){x(E,e,k),i(e,l),i(e,n),i(e,a),i(a,o),i(o,c),i(o,d),i(o,v),i(a,b),i(a,g),i(g,M),i(M,S),i(M,j),i(g,L),i(g,y),i(y,R),i(y,B),i(y,D),i(e,U),J||($=F(e,"click",r[3]),J=!0)},p(E,k){k&2&&!le(l.src,t=E[8].cover)&&f(l,"src",t),k&2&&s!==(s=""+(E[8].title+" Cover"))&&f(l,"alt",s),k&2&&u!==(u=E[8].title+"")&&X(c,u),k&2&&P!==(P=E[8].year+"")&&X(j,P),k&2&&W!==(W=E[8].rating+"")&&X(B,W)},d(E){E&&h(e),J=!1,$()}}}function je(r){let e,l,t,s,n,a,o=r[1].length>0&&r[0]&&be(r);return{c(){e=_("div"),l=_("input"),t=N(),o&&o.c(),this.h()},l(u){e=p(u,"DIV",{class:!0});var c=m(e);l=p(c,"INPUT",{autocomplete:!0,type:!0,class:!0}),t=A(c),o&&o.l(c),c.forEach(h),this.h()},h(){f(l,"autocomplete","off"),f(l,"type","text"),f(l,"class","outline outline-1 outline-slate-300 focus:outline-sky-600 focus:outline-2 p-2 drop-shadow-sm h-10 w-full sm:w-1/2 rounded bg-gradient-to-tr from-slate-100 to-white"),f(e,"class",s="transition-transform duration-500 w-full flex flex-col items-center translate-y-1/3 ease-out "+(r[1].length>0?"translate-y-0":"translate-y-1/3"))},m(u,c){x(u,e,c),i(e,l),i(e,t),o&&o.m(e,null),n||(a=[F(l,"input",r[2]),F(e,"focusin",r[5]),F(e,"blur",r[6])],n=!0)},p(u,[c]){u[1].length>0&&u[0]?o?o.p(u,c):(o=be(u),o.c(),o.m(e,null)):o&&(o.d(1),o=null),c&2&&s!==(s="transition-transform duration-500 w-full flex flex-col items-center translate-y-1/3 ease-out "+(u[1].length>0?"translate-y-0":"translate-y-1/3"))&&f(e,"class",s)},i:O,o:O,d(u){u&&h(e),o&&o.d(),n=!1,ke(a)}}}function Be(r,e,l){let t,s=!1,{onMovieSelected:n}=e,a=new Array;function o(v){let b=v.currentTarget.value;if(b===""){l(1,a=[]);return}t&&clearTimeout(t),t=setTimeout(()=>{Se.get("https://yts.mx/api/v2/list_movies.json?query_term="+b+"&sort_by=seeds").then(g=>{let M=g.data.data.movies;l(1,a=M.map(S=>({title:S.title,cover:S.medium_cover_image,rating:S.rating,year:S.year,hashes:S.torrents.sort(({seedsA:P},{seedsB:j})=>j-P).map(({hash:P})=>P)})).sort((S,P)=>P.rating-S.rating))}).catch(console.log)},1e3)}function u(v){let b=a[v.currentTarget.dataset.index];n(b)}const c=()=>l(0,s=!0),d=()=>l(0,s=!1);return r.$$set=v=>{"onMovieSelected"in v&&l(4,n=v.onMovieSelected)},[s,a,o,u,n,c,d]}class Ie extends ie{constructor(e){super();ue(this,e,Be,je,fe,{onMovieSelected:4})}}function xe(r){let e,l,t,s;return{c(){e=_("span"),l=N(),t=_("span"),s=_("span"),this.h()},l(n){e=p(n,"SPAN",{class:!0}),m(e).forEach(h),l=A(n),t=p(n,"SPAN",{class:!0});var a=m(t);s=p(a,"SPAN",{class:!0}),m(s).forEach(h),a.forEach(h),this.h()},h(){f(e,"class","absolute left-0 bottom-0 w-full h-1 bg-slate-200 rounded-b overflow-hidden"),f(s,"class","absolute left-0 bottom-0 h-1 w-full bg-gradient-to-tr from-green-400 to-green-600"),f(t,"class","absolute left-0 bottom-0 h-1 overflow-hidden")},m(n,a){x(n,e,a),x(n,l,a),x(n,t,a),i(t,s),r[4](t)},p:O,d(n){n&&h(e),n&&h(l),n&&h(t),r[4](null)}}}function We(r){let e;return{c(){e=_("span"),this.h()},l(l){e=p(l,"SPAN",{class:!0}),m(e).forEach(h),this.h()},h(){f(e,"class","bg-blue-500 left-0 bottom-0 absolute w-full h-1 animate-pulse")},m(l,t){x(l,e,t)},p:O,d(l){l&&h(e)}}}function Ve(r){let e,l,t,s,n,a,o,u,c,d,v,b,g,M=r[0].title+"",S,P,j,L,y,R,W,B=r[0].year+"",D,U,I,J,$=r[0].rating+"",E,k,z,G,K;function Q(Y,w){return Y[2]?We:xe}let V=Q(r),T=V(r);return{c(){e=_("div"),l=_("span"),t=se("svg"),s=se("symbol"),n=se("path"),a=se("use"),o=N(),u=_("img"),v=N(),b=_("span"),g=_("span"),S=C(M),P=N(),j=_("br"),L=N(),y=_("span"),R=_("span"),W=C("Year: "),D=C(B),U=N(),I=_("span"),J=C("Rating: "),E=C($),k=C("/10"),z=N(),T.c(),this.h()},l(Y){e=p(Y,"DIV",{class:!0});var w=m(e);l=p(w,"SPAN",{class:!0});var he=m(l);t=ae(he,"svg",{class:!0});var oe=m(t);s=ae(oe,"symbol",{id:!0,viewBox:!0});var de=m(s);n=ae(de,"path",{d:!0}),m(n).forEach(h),de.forEach(h),a=ae(oe,"use",{"xlink:href":!0}),m(a).forEach(h),oe.forEach(h),he.forEach(h),o=A(w),u=p(w,"IMG",{class:!0,src:!0,alt:!0}),v=A(w),b=p(w,"SPAN",{class:!0});var H=m(b);g=p(H,"SPAN",{class:!0});var Z=m(g);S=q(Z,M),P=A(Z),j=p(Z,"BR",{}),Z.forEach(h),L=A(H),y=p(H,"SPAN",{class:!0});var ee=m(y);R=p(ee,"SPAN",{class:!0});var ce=m(R);W=q(ce,"Year: "),D=q(ce,B),ce.forEach(h),U=A(ee),I=p(ee,"SPAN",{class:!0});var te=m(I);J=q(te,"Rating: "),E=q(te,$),k=q(te,"/10"),te.forEach(h),ee.forEach(h),H.forEach(h),z=A(w),T.l(w),w.forEach(h),this.h()},h(){f(n,"d","M20.281 20.656c0 0.391-0.156 0.781-0.438 1.062l-2.125 2.125c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-4.594-4.594-4.594 4.594c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-2.125-2.125c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l4.594-4.594-4.594-4.594c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l2.125-2.125c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l4.594 4.594 4.594-4.594c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l2.125 2.125c0.281 0.281 0.438 0.672 0.438 1.062s-0.156 0.781-0.438 1.062l-4.594 4.594 4.594 4.594c0.281 0.281 0.438 0.672 0.438 1.062z"),f(s,"id","icon-close"),f(s,"viewBox","0 0 22 28"),Ee(a,"xlink:href","#icon-close"),f(t,"class","icon icon-close svelte-2qiq74"),f(l,"class","absolute top-0 right-2 text-slate-400 cursor-pointer"),f(u,"class","h-24 mr-2 aspect-square object-cover rounded"),le(u.src,c=r[0].cover)||f(u,"src",c),f(u,"alt",d=""+(r[0].title+" Cover")),f(g,"class","font-extrabold text-lg"),f(R,"class","text-sm"),f(I,"class","text-sm"),f(y,"class","flex flex-col justify-self-end mt-1"),f(b,"class","flex flex-col h-full"),f(e,"class","bg-gradient-to-tr from-slate-100 to-white flex align-center self-center p-2 w-full sm:w-1/2 outline outline-1 outline-slate-300 drop-shadow-sm relative pb-3 rounded")},m(Y,w){x(Y,e,w),i(e,l),i(l,t),i(t,s),i(s,n),i(t,a),i(e,o),i(e,u),i(e,v),i(e,b),i(b,g),i(g,S),i(g,P),i(g,j),i(b,L),i(b,y),i(y,R),i(R,W),i(R,D),i(y,U),i(y,I),i(I,J),i(I,E),i(I,k),i(e,z),T.m(e,null),G||(K=F(l,"click",function(){Me(r[1])&&r[1].apply(this,arguments)}),G=!0)},p(Y,[w]){r=Y,w&1&&!le(u.src,c=r[0].cover)&&f(u,"src",c),w&1&&d!==(d=""+(r[0].title+" Cover"))&&f(u,"alt",d),w&1&&M!==(M=r[0].title+"")&&X(S,M),w&1&&B!==(B=r[0].year+"")&&X(D,B),w&1&&$!==($=r[0].rating+"")&&X(E,$),V===(V=Q(r))&&T?T.p(r,w):(T.d(1),T=V(r),T&&(T.c(),T.m(e,null)))},i:O,o:O,d(Y){Y&&h(e),T.d(),G=!1,K()}}}function Ye(r,e,l){let{currentMovie:t}=e,{onCancel:s}=e,n=!0,a;Pe(()=>{let c=new Ne().add(t.hashes[0],{announce:["wss://tracker.openwebtorrent.com","wss://tracker.btorrent.xyz"]});window.addEventListener("unload",()=>c.destroy()),c.on("ready",()=>{c.files.forEach(d=>{if(d.name.endsWith(".mp4")||d.name.endsWith(".mkv")){let b=Ae.createWriteStream(d.name,{size:d.length}).getWriter();d.createReadStream().on("data",g=>{b.write(g)}).on("end",()=>b.close())}}),l(2,n=!1),c.on("download",()=>{let d=Math.round(c.progress*1e4)/100;console.log(`${d}%`),l(3,a.style.width=`${d}%`,a)})})});function o(u){Ce[u?"unshift":"push"](()=>{a=u,l(3,a)})}return r.$$set=u=>{"currentMovie"in u&&l(0,t=u.currentMovie),"onCancel"in u&&l(1,s=u.onCancel)},[t,s,n,a,o]}class De extends ie{constructor(e){super();ue(this,e,Ye,Ve,fe,{currentMovie:0,onCancel:1})}}function $e(r){let e,l;return e=new Ie({props:{onMovieSelected:r[1]}}),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){me(e,t,s),l=!0},p:O,i(t){l||(ne(e.$$.fragment,t),l=!0)},o(t){re(e.$$.fragment,t),l=!1},d(t){ve(e,t)}}}function ze(r){let e,l;return e=new De({props:{currentMovie:r[0],onCancel:r[2]}}),{c(){_e(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){me(e,t,s),l=!0},p(t,s){const n={};s&1&&(n.currentMovie=t[0]),s&1&&(n.onCancel=t[2]),e.$set(n)},i(t){l||(ne(e.$$.fragment,t),l=!0)},o(t){re(e.$$.fragment,t),l=!1},d(t){ve(e,t)}}}function Ge(r){let e,l,t,s,n;const a=[ze,$e],o=[];function u(c,d){return c[0]?0:1}return t=u(r),s=o[t]=a[t](r),{c(){e=N(),l=_("main"),s.c(),this.h()},l(c){qe('[data-svelte="svelte-1bc0lsu"]',document.head).forEach(h),e=A(c),l=p(c,"MAIN",{class:!0});var v=m(l);s.l(v),v.forEach(h),this.h()},h(){document.title="watchit",f(l,"class","p-5 w-full h-full bg-slate-200 text-slate-900 flex justify-center")},m(c,d){x(c,e,d),x(c,l,d),o[t].m(l,null),n=!0},p(c,[d]){let v=t;t=u(c),t===v?o[t].p(c,d):(Te(),re(o[v],1,1,()=>{o[v]=null}),Re(),s=o[t],s?s.p(c,d):(s=o[t]=a[t](c),s.c()),ne(s,1),s.m(l,null))},i(c){n||(ne(s),n=!0)},o(c){re(s),n=!1},d(c){c&&h(e),c&&h(l),o[t].d()}}}function Le(r,e,l){let t=null;function s(a){console.log("Movie Selected: ",a.title),l(0,t=a)}return[t,s,()=>l(0,t=null)]}class Je extends ie{constructor(e){super();ue(this,e,Le,Ge,fe,{})}}export{Je as default};
